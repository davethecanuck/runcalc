(this.webpackJsonpruncalc=this.webpackJsonpruncalc||[]).push([[0],{39:function(e,t,a){},40:function(e,t,a){"use strict";a.r(t);var s=a(2),n=a(3),c=a(4),r=a(6),i=a(0),l=a.n(i),h=a(7),j=a.n(h),d=a(5),u=a(16),o=a(17),b=function e(){Object(s.a)(this,e),this.age=25},m=function(){function e(){Object(s.a)(this,e),this.label=null,this.distance=null,this.time=null,this.timeParts=null,this.scenario=new b}return Object(n.a)(e,[{key:"setDistance",value:function(e){this.distance=e,null!=this.timeParts&&this.setTimeParts(this.timeParts)}},{key:"ageGrade",value:function(){return 75}},{key:"setTimeParts",value:function(e){for(;e.length<3;)e.unshift(0);if(null!=this.distance&&0===e[0]){var t=this.calcTime(e);this.distance/t>15&&(e[0]=e[1],e[1]=e[2],e[2]=0)}this.timeParts=e,this.time=this.calcTime(e)}},{key:"calcTime",value:function(e){return 3600*e[0]+60*e[1]+e[2]}},{key:"predictTime",value:function(e){var t=Math.pow(1.06,Math.log2(e/this.distance)),a=this.time*(e/this.distance)*t,s=e/this.distance;s>1&&(s=1/s);var n=Math.pow(s,2);return console.log("1. predictTime this.distance="+this.distance+" this.time="+this.time+" input.distance="+e+" output.time="+a+" adjust="+t+" ratio="+s+" weight="+n),[a,n]}}]),e}(),p=[{label:"400m",value:400},{label:"800m",value:800},{label:"1km",value:1e3},{label:"1500m",value:1500},{label:"1600m",value:1600},{label:"1 mile",value:1609},{label:"3000m",value:3e3},{label:"2 mile",value:3219},{label:"5km",value:5e3},{label:"8km",value:8e3},{label:"5 mile",value:8047},{label:"10km",value:1e4},{label:"15km",value:15e3},{label:"20km",value:2e4},{label:"13.1 mile",value:21097},{label:"26.2 mile",value:42195},{label:"50km",value:5e4}],O=a(1),v={distance:{pattern:RegExp(/^\s*\d+\s*$/),help:"(select a distance)"},time:{pattern:RegExp(/^\s*(\d+):?([0-5]\d{1}?)(:([0-5]\d{1}))?\s*$/),help:"(hh:mm:ss or hh:mm or mm:ss)"},age:{pattern:RegExp(/^\s*\d*\s*$/),help:"(years)"}},x=function(e){Object(c.a)(a,e);var t=Object(r.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).handleDistanceSelect=function(e){n.setState({distance:e.value});var t=Object(u.a)({},n.state.errors);t.distance="",n.setState({errors:t})},n.handleChange=function(e){e.preventDefault();var t=e.target,a=t.name,s=t.value,c=n.state.errors,r=v[a];c[a]=r.pattern.test(s)?"":r.help,n.setState(Object(d.a)({errors:c},a,s))},n.validateForm=function(){var e=!0;return Object.values(n.state.errors).forEach((function(t){return t.length>0&&(e=!1)})),e},n.handleSubmit=function(e){if(e.preventDefault(),n.validateForm(n.state.errors)){console.info("Valid Form");var t=new b;t.age=n.state.age;var a=new m;a.distance=parseInt(n.state.distance),a.scenario=t;var s=v.time.pattern.exec(n.state.time),c=[];c.push(parseInt(s[1])),c.push(parseInt(s[2])),null!=s[4]&&c.push(parseInt(s[4])),a.setTimeParts(c),console.log(JSON.stringify(a)),n.props.addPastRace(a)}else console.error("Invalid Form")},n.state={distance:null,time:null,age:null,errors:{distance:v.distance.help,time:v.time.help,age:""}},n}return Object(n.a)(a,[{key:"render",value:function(){var e=this.state.errors;return Object(O.jsxs)("div",{className:"form-wrapper",children:[Object(O.jsx)("h2",{children:" Add a Past Race "}),Object(O.jsxs)("form",{onSubmit:this.handleSubmit,noValidate:!0,children:[Object(O.jsxs)("div",{className:"distance",children:[Object(O.jsxs)("label",{htmlFor:"distance",children:["Distance",e.distance.length>0&&Object(O.jsx)("span",{className:"error",children:e.distance})]}),Object(O.jsx)(o.a,{options:p,onChange:this.handleDistanceSelect})]}),Object(O.jsxs)("div",{className:"time",children:[Object(O.jsxs)("label",{htmlFor:"time",children:["Finish Time",e.time.length>0&&Object(O.jsx)("span",{className:"error",children:e.time})]}),Object(O.jsx)("input",{type:"text",name:"time",onChange:this.handleChange,noValidate:!0})]}),Object(O.jsxs)("div",{className:"age",children:[Object(O.jsxs)("label",{htmlFor:"age",children:["Your Age (optional)",e.age.length>0&&Object(O.jsx)("span",{className:"error",children:e.age})]}),Object(O.jsx)("input",{type:"text",name:"age",onChange:this.handleChange,noValidate:!0})]}),Object(O.jsx)("div",{className:"submit",children:Object(O.jsx)("button",{children:" Add "})})]})]})}}]),a}(l.a.Component),f=function(e){Object(c.a)(a,e);var t=Object(r.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(n.a)(a,[{key:"render",value:function(){var e=[];return this.props.races.forEach((function(t){e.push(Object(O.jsx)(g,{race:t},e.length))})),Object(O.jsxs)("div",{className:"race-table",children:[Object(O.jsx)("h2",{children:" Past Races "}),Object(O.jsxs)("table",{children:[Object(O.jsx)("thead",{children:Object(O.jsxs)("tr",{children:[Object(O.jsx)("th",{children:" Distance "}),Object(O.jsx)("th",{children:" Finish Time "}),Object(O.jsx)("th",{children:" Age "}),Object(O.jsx)("th",{children:" Age Grade "}),Object(O.jsx)("th",{})]})}),Object(O.jsx)("tbody",{children:e})]})]})}}]),a}(l.a.Component),g=function(e){Object(c.a)(a,e);var t=Object(r.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(n.a)(a,[{key:"render",value:function(){var e=this.props.race,t=e?e.distance:"",a=e?e.time:"",s=e?e.scenario.age:"",n=e?e.ageGrade():"";return Object(O.jsxs)("tr",{children:[Object(O.jsxs)("td",{children:[" ",t," "]}),Object(O.jsxs)("td",{children:[" ",a," "]}),Object(O.jsxs)("td",{children:[" ",s," "]}),Object(O.jsxs)("td",{children:[" ",n," "]}),Object(O.jsxs)("td",{children:[" ",Object(O.jsx)("input",{type:"submit",name:"past-race-remove",value:"-"})," "]})]})}}]),a}(l.a.Component),y=a(18),k=function(e){Object(c.a)(a,e);var t=Object(r.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(n.a)(a,[{key:"render",value:function(){var e=this,t=[];return this.props.pastRaces.length>0&&p.forEach((function(a){var s=0,n=0;if(e.props.pastRaces.forEach((function(e){var t=e.predictTime(a.value),c=Object(y.a)(t,2),r=c[0],i=c[1];s+=r*i,n+=i})),n>0){var c=new m;c.label=a.label,c.distance=a.value,c.time=parseInt(s/n),t.push(Object(O.jsx)(R,{race:c},t.length))}})),Object(O.jsxs)("div",{className:"race-table",children:[Object(O.jsx)("h2",{children:" Target Races "}),Object(O.jsxs)("table",{children:[Object(O.jsx)("thead",{children:Object(O.jsxs)("tr",{children:[Object(O.jsx)("th",{children:" Distance "}),Object(O.jsx)("th",{children:" Finish Time "}),Object(O.jsx)("th",{children:" Age Grade "})]})}),Object(O.jsx)("tbody",{children:t})]})]})}}]),a}(l.a.Component),R=function(e){Object(c.a)(a,e);var t=Object(r.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(n.a)(a,[{key:"render",value:function(){var e=this.props.race,t=e?e.label:"",a=e?e.time:"",s="",n=e?e.ageGrade():"";if(a){var c=Math.floor(a/3600),r=Math.floor((a-3600*c)/60),i=a-3600*c-60*r;s=c.toString().padStart(2,"0")+":"+r.toString().padStart(2,"0")+":"+i.toString().padStart(2,"0")}return Object(O.jsxs)("tr",{children:[Object(O.jsxs)("td",{children:[" ",t," "]}),Object(O.jsxs)("td",{children:[" ",s," "]}),Object(O.jsxs)("td",{children:[" ",n," "]})]})}}]),a}(l.a.Component),S=(a(39),function(e){Object(c.a)(a,e);var t=Object(r.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).state={pastRaces:[]},n}return Object(n.a)(a,[{key:"render",value:function(){var e=this;return Object(O.jsxs)("div",{className:"wrapper",children:[Object(O.jsxs)("div",{className:"race-calc-row",children:[Object(O.jsx)(x,{addPastRace:function(t){return e.addPastRace(t)}}),Object(O.jsx)(f,{races:this.state.pastRaces}),Object(O.jsx)(k,{pastRaces:this.state.pastRaces})]}),Object(O.jsx)("div",{className:"race-calc-row"})]})}},{key:"addPastRace",value:function(e){var t=this.state.pastRaces.slice();t.push(e),this.setState({pastRaces:t})}}]),a}(l.a.Component));j.a.render(Object(O.jsx)(S,{}),document.getElementById("root"))}},[[40,1,2]]]);
//# sourceMappingURL=main.4e7fb72e.chunk.js.map